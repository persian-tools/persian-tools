---
title: "Place by National ID"
description: "Extract geographic information from Iranian National IDs"
icon: "location-dot"
---

# Geographic Information from National ID

The `getPlaceByIranNationalId` utility extracts the birthplace (city and province) information encoded in Iranian National ID numbers.

## Basic Usage

<CodeGroup>
```typescript Import
import { getPlaceByIranNationalId } from 'persian-tools';
```

```javascript CommonJS
const { getPlaceByIranNationalId } = require("persian-tools");
```

</CodeGroup>

### Simple Extraction

```typescript
getPlaceByIranNationalId("0499370899");
// Output: { city: 'Ø®Ù…ÛŒÙ†', province: 'Ù…Ø±Ú©Ø²ÛŒ' }

getPlaceByIranNationalId("0684159415");
// Output: { city: 'Ø´ÛŒØ±Ø§Ø²', province: 'ÙØ§Ø±Ø³' }

getPlaceByIranNationalId("0076229645");
// Output: { city: 'ØªÙ‡Ø±Ø§Ù†', province: 'ØªÙ‡Ø±Ø§Ù†' }
```

## How It Works

Iranian National IDs encode geographic information in their first 3 digits, which correspond to the registration office where the ID was issued (typically the birthplace).

<AccordionGroup>
  <Accordion title="ğŸ—ºï¸ Geographic Encoding" icon="map">
    The first 3 digits represent a unique code for each registration office across Iran's provinces and cities.
  </Accordion>

<Accordion title="ğŸ“Š Coverage" icon="chart-bar">
	Supports all 31 provinces and hundreds of cities across Iran with their registration office codes.
</Accordion>

  <Accordion title="ğŸ” Validation" icon="magnifying-glass">
    Only works with valid National IDs - invalid IDs return null.
  </Accordion>
</AccordionGroup>

## Advanced Examples

### User Registration with Location

```typescript
interface UserRegistration {
	nationalId: string;
	name: string;
	phone: string;
}

function processRegistration(userData: UserRegistration) {
	// Validate National ID first
	if (!verifyIranianNationalId(userData.nationalId)) {
		throw new Error("Ú©Ø¯ Ù…Ù„ÛŒ Ù…Ø¹ØªØ¨Ø± Ù†ÛŒØ³Øª");
	}

	// Extract location information
	const location = getPlaceByIranNationalId(userData.nationalId);

	return {
		...userData,
		birthPlace: location,
		isFromTehran: location?.province === "ØªÙ‡Ø±Ø§Ù†",
		registrationRegion: location ? `${location.city}, ${location.province}` : "Ù†Ø§Ù…Ø´Ø®Øµ",
	};
}
```

### Demographics Analysis

```typescript
function analyzeUserDemographics(nationalIds: string[]) {
	const locations = nationalIds
		.filter((id) => verifyIranianNationalId(id))
		.map((id) => getPlaceByIranNationalId(id))
		.filter((location) => location !== null);

	// Group by province
	const provinceStats = locations.reduce(
		(stats, location) => {
			const province = location!.province;
			stats[province] = (stats[province] || 0) + 1;
			return stats;
		},
		{} as Record<string, number>,
	);

	// Group by city
	const cityStats = locations.reduce(
		(stats, location) => {
			const city = location!.city;
			stats[city] = (stats[city] || 0) + 1;
			return stats;
		},
		{} as Record<string, number>,
	);

	return {
		totalValid: locations.length,
		provinceDistribution: provinceStats,
		cityDistribution: cityStats,
		topProvinces: Object.entries(provinceStats)
			.sort(([, a], [, b]) => b - a)
			.slice(0, 5),
	};
}
```

### Geographic Filtering

```typescript
function filterUsersByRegion(
	users: Array<{ nationalId: string; name: string }>,
	targetProvince?: string,
	targetCity?: string,
) {
	return users
		.filter((user) => {
			const location = getPlaceByIranNationalId(user.nationalId);

			if (!location) return false;

			if (targetProvince && location.province !== targetProvince) {
				return false;
			}

			if (targetCity && location.city !== targetCity) {
				return false;
			}

			return true;
		})
		.map((user) => ({
			...user,
			location: getPlaceByIranNationalId(user.nationalId),
		}));
}

// Usage
const tehranUsers = filterUsersByRegion(allUsers, "ØªÙ‡Ø±Ø§Ù†");
const shirazUsers = filterUsersByRegion(allUsers, "ÙØ§Ø±Ø³", "Ø´ÛŒØ±Ø§Ø²");
```

## Major Cities and Codes

<Tabs>
  <Tab title="Tehran Province">
    | Code Range | City |
    |------------|------|
    | 001-085 | ØªÙ‡Ø±Ø§Ù† |
    | 136-151 | ÙˆØ±Ø§Ù…ÛŒÙ† |
    | 196-200 | Ù¾Ø§Ú©Ø¯Ø´Øª |
    | 219-229 | Ø§Ø³Ù„Ø§Ù…Ø´Ù‡Ø± |
    | 297-300 | Ø´Ù‡Ø±ÛŒØ§Ø± |
  </Tab>

<Tab title="Isfahan Province">
	| Code Range | City | |------------|------| | 231-244 | Ø§ØµÙÙ‡Ø§Ù† | | 273-280 | Ú©Ø§Ø´Ø§Ù† | | 390-399 | Ø®Ù…ÛŒÙ†ÛŒâ€ŒØ´Ù‡Ø± | |
	419-428 | Ù†Ø¬Ùâ€ŒØ¢Ø¨Ø§Ø¯ |
</Tab>

<Tab title="Fars Province">
	| Code Range | City | |------------|------| | 684-695 | Ø´ÛŒØ±Ø§Ø² | | 729-738 | Ú©Ø§Ø²Ø±ÙˆÙ† | | 759-768 | Ù…Ø±ÙˆØ¯Ø´Øª | | 779-788
	| ÙØ³Ø§ |
</Tab>

  <Tab title="Khuzestan Province">
    | Code Range | City |
    |------------|------|
    | 589-599 | Ø§Ù‡ÙˆØ§Ø² |
    | 639-648 | Ø¢Ø¨Ø§Ø¯Ø§Ù† |
    | 649-658 | Ø®Ø±Ù…Ø´Ù‡Ø± |
    | 679-683 | Ø¯Ø²ÙÙˆÙ„ |
  </Tab>
</Tabs>

## Return Value Structure

```typescript
interface PlaceInfo {
	city: string; // City name in Persian
	province: string; // Province name in Persian
}

// Function signature
function getPlaceByIranNationalId(nationalId: string): PlaceInfo | null;
```

## Edge Cases

### Invalid National IDs

```typescript
getPlaceByIranNationalId("1234567890"); // null (invalid checksum)
getPlaceByIranNationalId("0000000000"); // null (invalid pattern)
getPlaceByIranNationalId(""); // null (empty string)
getPlaceByIranNationalId(null); // null
```

### Unknown Geographic Codes

```typescript
// Very rare cases where code might not be in database
getPlaceByIranNationalId("9999999999"); // null (if code 999 doesn't exist)
```

### Different Input Formats

```typescript
// Works with Persian and Arabic digits
getPlaceByIranNationalId("Û°Û´Û¹Û¹Û³Û·Û°Û¸Û¹Û¹");
// Output: { city: 'Ø®Ù…ÛŒÙ†', province: 'Ù…Ø±Ú©Ø²ÛŒ' }

getPlaceByIranNationalId("Ù Ù¤Ù©Ù©Ù£Ù§Ù Ù¨Ù©Ù©");
// Output: { city: 'Ø®Ù…ÛŒÙ†', province: 'Ù…Ø±Ú©Ø²ÛŒ' }
```

## Performance Considerations

<AccordionGroup>
  <Accordion title="ğŸš€ Performance Metrics" icon="bolt">
    - **Lookup time**: ~0.02ms (hash table lookup)
    - **Memory overhead**: ~50KB (geographic database)
    - **Batch processing**: Excellent scaling
  </Accordion>

  <Accordion title="ğŸ“Š Optimization Tips" icon="lightbulb">
    - Cache results for repeated lookups
    - Validate National ID first to avoid unnecessary lookups
    - Use in combination with validation for better UX
  </Accordion>
</AccordionGroup>

## TypeScript Support

```typescript
import { getPlaceByIranNationalId, PlaceInfo } from "persian-tools";

// Type-safe usage
const location: PlaceInfo | null = getPlaceByIranNationalId("0499370899");

if (location) {
	console.log(`City: ${location.city}, Province: ${location.province}`);
}

// Custom type guards
function isFromTehran(nationalId: string): boolean {
	const location = getPlaceByIranNationalId(nationalId);
	return location?.province === "ØªÙ‡Ø±Ø§Ù†";
}
```

## Real-world Applications

### E-commerce Shipping

```typescript
function calculateShippingCost(nationalId: string, basePrice: number): number {
	const location = getPlaceByIranNationalId(nationalId);

	if (!location) return basePrice;

	// Different rates for different provinces
	const provinceMultipliers: Record<string, number> = {
		ØªÙ‡Ø±Ø§Ù†: 1.0,
		Ø§ØµÙÙ‡Ø§Ù†: 1.2,
		ÙØ§Ø±Ø³: 1.3,
		Ø®ÙˆØ²Ø³ØªØ§Ù†: 1.4,
		// Remote provinces
		"Ø³ÛŒØ³ØªØ§Ù† Ùˆ Ø¨Ù„ÙˆÚ†Ø³ØªØ§Ù†": 2.0,
		Ú©Ø±Ø¯Ø³ØªØ§Ù†: 1.8,
	};

	const multiplier = provinceMultipliers[location.province] || 1.5;
	return Math.round(basePrice * multiplier);
}
```

### Regional Service Availability

```typescript
function checkServiceAvailability(nationalId: string, service: string): boolean {
	const location = getPlaceByIranNationalId(nationalId);

	if (!location) return false;

	const serviceMap: Record<string, string[]> = {
		"express-delivery": ["ØªÙ‡Ø±Ø§Ù†", "Ø§ØµÙÙ‡Ø§Ù†", "ÙØ§Ø±Ø³", "Ø®Ø±Ø§Ø³Ø§Ù† Ø±Ø¶ÙˆÛŒ"],
		"same-day-delivery": ["ØªÙ‡Ø±Ø§Ù†"],
		"premium-support": ["ØªÙ‡Ø±Ø§Ù†", "Ø§ØµÙÙ‡Ø§Ù†", "ÙØ§Ø±Ø³"],
	};

	return serviceMap[service]?.includes(location.province) || false;
}
```

### Marketing Segmentation

```typescript
function segmentUsersByRegion(users: Array<{ nationalId: string }>) {
	const segments = {
		metropolitan: [] as any[],
		urban: [] as any[],
		rural: [] as any[],
	};

	const metropolitanProvinces = ["ØªÙ‡Ø±Ø§Ù†", "Ø§ØµÙÙ‡Ø§Ù†", "ÙØ§Ø±Ø³"];
	const urbanProvinces = ["Ø®Ø±Ø§Ø³Ø§Ù† Ø±Ø¶ÙˆÛŒ", "Ø¢Ø°Ø±Ø¨Ø§ÛŒØ¬Ø§Ù† Ø´Ø±Ù‚ÛŒ", "Ø®ÙˆØ²Ø³ØªØ§Ù†"];

	users.forEach((user) => {
		const location = getPlaceByIranNationalId(user.nationalId);
		if (!location) return;

		if (metropolitanProvinces.includes(location.province)) {
			segments.metropolitan.push({ ...user, location });
		} else if (urbanProvinces.includes(location.province)) {
			segments.urban.push({ ...user, location });
		} else {
			segments.rural.push({ ...user, location });
		}
	});

	return segments;
}
```

## Integration Examples

### React Component

```typescript
function UserLocationDisplay({ nationalId }: { nationalId: string }) {
  const location = getPlaceByIranNationalId(nationalId);

  if (!location) {
    return <span>Ù…Ø­Ù„ ØªÙˆÙ„Ø¯: Ù†Ø§Ù…Ø´Ø®Øµ</span>;
  }

  return (
    <div className="location-info">
      <span>Ù…Ø­Ù„ ØªÙˆÙ„Ø¯: {location.city}</span>
      <span>Ø§Ø³ØªØ§Ù†: {location.province}</span>
    </div>
  );
}
```

### Database Model

```typescript
interface User {
	id: string;
	nationalId: string;
	name: string;
	birthCity?: string;
	birthProvince?: string;
}

function enrichUserWithLocation(user: Omit<User, "birthCity" | "birthProvince">): User {
	const location = getPlaceByIranNationalId(user.nationalId);

	return {
		...user,
		birthCity: location?.city,
		birthProvince: location?.province,
	};
}
```

## Related Utilities

<CardGroup cols={2}>
	<Card title="National ID Validation" icon="id-card" href="/utilities/validation/national-id">
		Validate Iranian National ID numbers
	</Card>
	<Card title="Find Capital by Province" icon="map-location-dot" href="/utilities/geographic/capital-by-province">
		Get province capital cities
	</Card>
	<Card
		title="Province from Coordinates"
		icon="location-crosshairs"
		href="/utilities/geographic/province-from-coordinate"
	>
		Find province from GPS coordinates
	</Card>
	<Card title="Legal ID Validation" icon="building" href="/utilities/validation/legal-id">
		Validate Iranian legal entity IDs
	</Card>
</CardGroup>
